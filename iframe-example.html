<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloe Edu - Housing Assistant Iframe Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .iframe-container {
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
        .parameter-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #0056b3;
        }
        .url-display {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            word-break: break-all;
            margin-top: 15px;
        }
        .examples {
            margin-top: 30px;
        }
        .example-link {
            display: inline-block;
            margin: 5px;
            padding: 8px 15px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }
        .example-link:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cloe Edu - Housing Assistant Iframe Integration</h1>
        
        <div class="parameter-form">
            <h3>Configure Student Parameters</h3>
            <form id="parameterForm">
                <div class="form-group">
                    <label for="studentName">Student Name:</label>
                    <input type="text" id="studentName" name="studentName" value="Marie" placeholder="Enter student name">
                </div>
                
                <div class="form-group">
                    <label for="schoolName">School Name:</label>
                    <input type="text" id="schoolName" name="schoolName" value="Sciences Po" placeholder="Enter school name">
                </div>
                
                <div class="form-group">
                    <label for="city">City:</label>
                    <input type="text" id="city" name="city" value="Paris" placeholder="Enter city">
                </div>
                
                <div class="form-group">
                    <label for="language">Language:</label>
                    <select id="language" name="language">
                        <option value="en">English</option>
                        <option value="fr">French</option>
                        <option value="es">Spanish</option>
                        <option value="de">German</option>
                    </select>
                </div>
                
                <button type="submit">Update Iframe</button>
            </form>
            
            <div class="url-display" id="urlDisplay">
                <!-- URL will be displayed here -->
            </div>
        </div>
        
        <div class="iframe-container">
            <iframe id="housingAssistant" src="" title="Cloe Edu Housing Assistant"></iframe>
        </div>
        
        <div class="examples">
            <h3>Quick Examples:</h3>
            <a href="#" class="example-link" onclick="loadExample('Marie', 'Sciences Po', 'Paris', 'fr')">French Student in Paris</a>
            <a href="#" class="example-link" onclick="loadExample('John', 'HEC Paris', 'Lyon', 'en')">English Student in Lyon</a>
            <a href="#" class="example-link" onclick="loadExample('Carlos', 'ESCP Business School', 'Marseille', 'es')">Spanish Student in Marseille</a>
            <a href="#" class="example-link" onclick="loadExample('Anna', 'EM Lyon', 'Toulouse', 'de')">German Student in Toulouse</a>
        </div>
    </div>

    <script>
        // Base URL for the housing assistant app
        const BASE_URL = 'http://localhost:3000'; // Change this to your actual deployment URL
        
        function updateIframe() {
            const studentName = document.getElementById('studentName').value;
            const schoolName = document.getElementById('schoolName').value;
            const city = document.getElementById('city').value;
            const language = document.getElementById('language').value;
            
            // Build URL with parameters
            const url = new URL(BASE_URL);
            url.searchParams.set('agentConfig', 'realEstate');
            url.searchParams.set('student_name', studentName);
            url.searchParams.set('school_name', schoolName);
            url.searchParams.set('city', city);
            url.searchParams.set('language', language);
            
            // Update iframe source
            document.getElementById('housingAssistant').src = url.toString();
            
            // Display the URL
            document.getElementById('urlDisplay').textContent = url.toString();
        }
        
        function loadExample(name, school, city, lang) {
            document.getElementById('studentName').value = name;
            document.getElementById('schoolName').value = school;
            document.getElementById('city').value = city;
            document.getElementById('language').value = lang;
            updateIframe();
        }
        
        // Initialize form
        document.getElementById('parameterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            updateIframe();
        });
        
        // Load initial example
        loadExample('Marie', 'Sciences Po', 'Paris', 'fr');
    </script>
</body>
</html>
